{# vim:set softtabstop=2: -#}
{% set title = 'Wizard Authorization' -%}
{#% set refresh = 15 %#}
{% include "_header.html" %}
{% set active="auth" %}
{% include "_wizard.html" %}

        <div class="col-md-9">
          <h1>Authorization</h1>
          <form method="post">
            <p>Please set administration username and password. Prusa Link will
              use HTTP Digest authorization. All values must be <b>7 characters
              length at least</b>.</p>

            {% set errors = wizard.errors.get('auth', {}) %}
            <div class="form-group row">
              <label for="username" class="col-sm-2 col-form-label">Username:</label>
              <div class="col-sm-10">
                <input type="text" class="form-control {{ 'is-invalid' if errors.get('username') else '' }}" id="username" name="username" value="{{ wizard.username or '' }}" required>
                <div class="invalid-feedback">
                  Please provide a username with sufficient length.
                </div>
              </div>
            </div>

            <div class="form-group row">
              <label for="password" class="col-sm-2 col-form-label">Password:</label>
              <div class="col-sm-10">
                <input type="password" class="form-control {{ 'is-invalid' if errors.get('password') else '' }}" id="password" name="password" value="{{ wizard.password or '' }}" required>
                <div class="invalid-feedback">
                  Please provide a strong password.
                </div>
              </div>
            </div>

            <div class="form-group row">
              <label for="repassword" class="col-sm-2 col-form-label">Password again:</label>
              <div class="col-sm-10">
                <input type="password" class="form-control {{ 'is-invalid' if errors.get('repassword') else '' }}" id="repassword" name="repassword" value="{{ wizard.repassword or '' }}" required>
                <div class="invalid-feedback">
                  Passwords must be same.
                </div>
              </div>
            </div>

            <p>You probably want to set <code>Api-Key</code> for other
              applications to use internal API of Prusa Link. For example
              Prusa Slicer can upload files to Prusa Link after slicing.</p>

            <div class="form-group row">
              <label for="api_key" class="col-sm-2 col-form-label">Api-Key</label>
              <div class="col-sm-10">
                <input type="text" class="form-control {{ 'is-invalid' if errors.get('api_key') else '' }}" id="api_key" name="api_key" value="{{ wizard.api_key or '' }}">
                <div class="invalid-feedback">
                  Please provide an Api-Key with sufficient length.
                </div>
              </div>

            </div>

            <input type="submit" value="Next"/>
          </form>
        </div>{# /col-md-9 so end of content  #}
      </div>{# /row #}
    </div>{# /container #}
{% include "_footer.html" %}
